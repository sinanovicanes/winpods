name: "Setup Tauri"
description: "Install Tauri dependencies"
runs:
  using: "composite"
  steps:
    # Cache apt package manager cache
    - name: Cache apt packages
      uses: actions/cache@v3
      with:
        path: |
          /var/cache/apt/archives
          /var/lib/apt/lists
        key: ${{ runner.os }}-apt-cache-${{ hashFiles('**/Cargo.lock') }}
        restore-keys: |
          ${{ runner.os }}-apt-cache-

    # Install Tauri dependencies
    - name: Tauri dependencies
      shell: bash
      run: |
        sudo apt update && sudo apt install -y \
          libwebkit2gtk-4.1-dev \
          build-essential \
          curl \
          wget \
          file \
          libxdo-dev \
          libssl-dev \
          libayatana-appindicator3-dev \
          librsvg2-dev \
          webkit2gtk-driver \
          xvfb
